<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      /* For demo purposes */
      body {
        max-width: 30rem;
        margin: 0 auto;
        background: #333;
        line-height: 1.6rem;
        padding: 5rem;
        font-family: system-ui;
        color: white;
      }
      a {
        color: DodgerBlue;
      }
    </style>
    <title>Catch all anchor tags smooth scroll with offset, able to handle anchor tags with same-URL prefix</title>
  </head>

  <body>
    <h1>Catch all anchor tags smooth scroll with offset, able to handle anchor tags with same-URL prefix</h1>
    <ul>
      <li><a href="#test">#test</a></li>
      <li><a href="https://dazecoop.github.io/anchor-tag-smooth-scroll/">https://dazecoop.github.io/anchor-tag-smooth-scroll/#test</a></li>
      <li><a href="http://example.com">http://example.com</a></li>
      <li><a href="http://example.com#test">http://example.com#test</a></li>
    </ul>
    <p>
      Magna hac nunc accumsan torquent elementum est conubia quam tortor malesuada nibh ante. Eleifend convallis commodo metus parturient nostra dis pulvinar ultrices sem praesent turpis. Porttitor eros vulputate viverra tellus, tortor mi nisl faucibus. Euismod aliquet ut ut vestibulum pellentesque pretium et maecenas consequat vehicula. Leo lacinia ullamcorper molestie curabitur per litora! Interdum viverra arcu enim vulputate ultricies torquent lobortis ornare netus mauris parturient elementum. Lectus feugiat nam iaculis.
    </p>
    <p>
      Eu ultricies lorem malesuada fermentum aenean, ad cursus potenti nascetur etiam varius. Phasellus fermentum mattis donec aptent non pulvinar enim ultricies sodales convallis molestie. Sociis eleifend per rutrum sem vehicula cum ut rhoncus potenti netus? Porta senectus pharetra convallis purus iaculis morbi imperdiet donec, malesuada arcu. Aenean curae; curabitur mi! Augue hendrerit commodo a lacus lectus commodo faucibus feugiat volutpat consectetur non velit. Morbi consectetur gravida molestie.
    </p>
    <p>
      Ante pharetra convallis nec duis ac etiam tempus scelerisque quis lacinia conubia. Aliquam arcu, augue hendrerit posuere ut cras nullam taciti facilisis taciti posuere ridiculus. Primis bibendum eu facilisi sagittis ridiculus hendrerit torquent augue. Mus habitasse bibendum porta ridiculus convallis consequat risus nulla. Netus fames at inceptos placerat velit faucibus tellus. Sodales mus lorem tincidunt, fames augue! Non dolor lorem pretium porttitor dapibus ligula condimentum. Fringilla?
    </p>
    <p>
      Nascetur justo maecenas est, faucibus massa? Tellus pharetra tellus habitasse iaculis sed lacinia vivamus. Pulvinar netus curabitur ultricies rhoncus torquent eros urna natoque dis taciti in dolor. Odio ipsum lorem justo. Pretium auctor odio ligula. Ipsum iaculis dolor, habitant interdum mattis odio tristique class interdum facilisis pretium euismod. Morbi aenean ac augue. Nunc lectus etiam arcu tempor erat elit cubilia vel molestie mattis? Quisque vestibulum tellus vulputate mauris lobortis leo semper ligula neque.
    </p>
    <h2 id="test">Test anchor</h2>
    <p>
      Suscipit cum est quam ultrices cursus? Felis integer faucibus proin libero tortor primis sed quisque. Ac enim viverra quis turpis donec. Erat velit vitae hendrerit rhoncus sed lacinia mauris. Habitasse vivamus aliquam dis vulputate ridiculus dui, sapien a id duis! Nisi hac, elementum donec. Placerat, varius molestie rutrum fames diam cubilia sodales! Semper aptent magna taciti curae; feugiat urna odio. Purus tincidunt eros dolor auctor lacus magna suspendisse sodales vivamus platea. Condimentum suspendisse, montes metus fames tortor. Penatibus euismod consectetur nibh? Erat porttitor rhoncus, in pretium. Vel viverra nam quisque non.
    </p>
    <p>
      Ante pharetra convallis nec duis ac etiam tempus scelerisque quis lacinia conubia. Aliquam arcu, augue hendrerit posuere ut cras nullam taciti facilisis taciti posuere ridiculus. Primis bibendum eu facilisi sagittis ridiculus hendrerit torquent augue. Mus habitasse bibendum porta ridiculus convallis consequat risus nulla. Netus fames at inceptos placerat velit faucibus tellus. Sodales mus lorem tincidunt, fames augue! Non dolor lorem pretium porttitor dapibus ligula condimentum. Fringilla?
    </p>
    <p>
      Nascetur justo maecenas est, faucibus massa? Tellus pharetra tellus habitasse iaculis sed lacinia vivamus. Pulvinar netus curabitur ultricies rhoncus torquent eros urna natoque dis taciti in dolor. Odio ipsum lorem justo. Pretium auctor odio ligula. Ipsum iaculis dolor, habitant interdum mattis odio tristique class interdum facilisis pretium euismod. Morbi aenean ac augue. Nunc lectus etiam arcu tempor erat elit cubilia vel molestie mattis? Quisque vestibulum tellus vulputate mauris lobortis leo semper ligula neque.
    </p>
    <p>
      Nascetur justo maecenas est, faucibus massa? Tellus pharetra tellus habitasse iaculis sed lacinia vivamus. Pulvinar netus curabitur ultricies rhoncus torquent eros urna natoque dis taciti in dolor. Odio ipsum lorem justo. Pretium auctor odio ligula. Ipsum iaculis dolor, habitant interdum mattis odio tristique class interdum facilisis pretium euismod. Morbi aenean ac augue. Nunc lectus etiam arcu tempor erat elit cubilia vel molestie mattis? Quisque vestibulum tellus vulputate mauris lobortis leo semper ligula neque.
    </p>
    <p>
      Suscipit cum est quam ultrices cursus? Felis integer faucibus proin libero tortor primis sed quisque. Ac enim viverra quis turpis donec. Erat velit vitae hendrerit rhoncus sed lacinia mauris. Habitasse vivamus aliquam dis vulputate ridiculus dui, sapien a id duis! Nisi hac, elementum donec. Placerat, varius molestie rutrum fames diam cubilia sodales! Semper aptent magna taciti curae; feugiat urna odio. Purus tincidunt eros dolor auctor lacus magna suspendisse sodales vivamus platea. Condimentum suspendisse, montes metus fames tortor. Penatibus euismod consectetur nibh? Erat porttitor rhoncus, in pretium. Vel viverra nam quisque non.
    </p>
    <p>
      Ante pharetra convallis nec duis ac etiam tempus scelerisque quis lacinia conubia. Aliquam arcu, augue hendrerit posuere ut cras nullam taciti facilisis taciti posuere ridiculus. Primis bibendum eu facilisi sagittis ridiculus hendrerit torquent augue. Mus habitasse bibendum porta ridiculus convallis consequat risus nulla. Netus fames at inceptos placerat velit faucibus tellus. Sodales mus lorem tincidunt, fames augue! Non dolor lorem pretium porttitor dapibus ligula condimentum. Fringilla?
    </p>
    
  </body>

  <script>
  document.querySelectorAll('a[href*="#"]').forEach(anchor => {
    const href = anchor.getAttribute('href');
    const hashPos = href.search(/#/i);
    let target = false;
    if (hashPos > 0) {
      // Destination URL matches current URL, scroll down.
      if (href.split('#')[0] === window.location.href.split('#')[0]) {
        target = document.querySelector('#' + href.split('#')[1]);
      }
    // # position is zero, regular anchor, scroll down.
    } else if (hashPos === 0) {
      target = document.querySelector(href);
    }
    anchor.addEventListener('click', function (e) {
      if (target) {
        e.preventDefault();
        const offset = 50;
        window.scrollTo({
          top: target.getBoundingClientRect().top + window.scrollY - offset,
          behavior: 'smooth',
        });
      }
    });
  });
  </script>

</html>
